@model PagedList<Patient>
<div class="table-responsive">

    <table class="table">

        <thead class="table-head align-middle">
            <tr>
                <th>Patient ID</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Email</th>
                <th>Age</th>
                <th>Phone Number</th>
                <th>Gender</th>
                <th>Disease</th>
                <th>Doctor</th>
                <th>Action</th>
            </tr>
        </thead>

        <tbody class="table-body align-middle">

            @foreach (Patient patient in Model)
            {
                <tr>
                    <td>@patient.PatientId</td>
                    <td>@patient.FirstName</td>
                    <td>@patient.LastName</td>
                    <td>@patient.Email</td>
                    <td>@patient.Age</td>
                    <td>@patient.PhoneNo</td>
                    <td>@patient.Gender</td>
                    <td>@patient.Disease</td>
                    <td>@patient.Specialist</td>
                    <td>
                        <div class="d-flex">
                            <button class="btn bg-info text-white edit-patient-btn"
                            data-patientid="@patient.PatientId"
                            data-firstname="@patient.FirstName"
                            data-lastname="@patient.LastName"
                            data-email="@patient.Email"
                            data-age="@patient.Age"
                            data-phoneno="@patient.PhoneNo"
                            data-disease="@patient.Disease"
                            data-specialist="@patient.Specialist"
                            >Edit</button>
                            <button class="btn bg-danger text-white ms-2 delete-patient-btn" data-patientid="@patient.PatientId">Delete</button>
                        </div>
                    </td>
                </tr>

            }
        </tbody>
    </table>

</div>

<div class="pagination d-flex align-content-center mt-3">

    <div></div>

    @if (Model.hasPrevious)
    {
        <button class="border-0 mx-1 page-item" onclick="loadPartialTable(1)">❮❮</button>
        <button class="page-item mx-1 border-0" onclick="loadPartialTable(@(Model.CurrentPage-1))">❮</button>
    }
    else
    {
        <button disabled class="disabled border-0 mx-1 page-item">❮❮</button>
        <button disabled class="disabled page-item mx-1 border-0">❮</button>
    }

    <button class="page-item mx-1 active border-0">@Model.CurrentPage</button>

    @if (Model.hasNext)
    {
        <button class="page-item mx-1 border-0" onclick="loadPartialTable(@(Model.CurrentPage+1))">❯</button>
        <button class="page-item mx-1 border-0" onclick="loadPartialTable(@Model.TotalPages)">❯❯</button>
    }
    else
    {
        <button disabled class="page-item disabled mx-1 border-0">❯</button>
        <button disabled class="page-item disabled mx-1 border-0">❯❯</button>
    }

</div>

<script>

    $('.edit-patient-btn').click(function () {
        let patientId = $(this).data("patientid");

        $.ajax({
            url: "/Home/LoadEditPatientModal",
            data: { patientId: patientId },
            type: 'GET',
            success: function (result) {
                $('#modal-div').html(result);
                $('#addPatientModal').modal('show');
            },
            error: function (error) {
                console.log(error);
                alert('Error Fetching Data')
            },
        });
    });

    $('.delete-patient-btn').click(function () {
        let patientId = $(this).data("patientid");

        $.ajax({
            url: "/Home/DeletePatient",
            data: { patientId: patientId },
            type: 'GET',
            success: function (result) {
                if (result) {
                    location.reload();
                }
            },
            error: function (error) {
                console.log(error);
                alert('Error Fetching Data')
            },
        });
    });

</script>