@model ConcludeCareViewModel
@{
    Layout = "_PhysicianDashboardLayout";
    ViewData["UserName"] = Model.UserName;
}


<div class="container-fluid d-flex justify-content-center row ">

    <div class="col-md-8 col-12">

        <div class="d-flex justify-content-between mt-3">

            <h4>Conclude Care</h4>

            <button onclick="history.back(-1)" class="btn btn-outline-info shadow-none night-mode-btn d-flex align-items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 -960 960 960">
                    <path d="m142-480 294 294q15 15 14.5 35T435-116q-15 15-35 15t-35-15L57-423q-12-12-18-27t-6-30q0-15 6-30t18-27l308-308q15-15 35.5-14.5T436-844q15 15 15 35t-15 35L142-480Z" />
                </svg>
                <span>Back</span>
            </button>

        </div>


        <div class="shadow p-3 dashboard-card mt-4">

            <h6>Patient Name</h6>
            <h4 class="text-info m-0">@Model.PatientName</h4>

            <div class="d-flex justify-content-between">
                <h3>Encounter forms</h3>

                <div class="btn btn-outline-info">
                    <img src="/images/upload_icon_blue.svg" alt="upload-icon">
                    <span class="ms-1">Upload</span>
                </div>

            </div>

            <div class="mt-3 table-responsive col-12">
                <table class="table">

                    <colgroup>
                        <col span="1" style="width: 85%;" />
                        <col span="1" style="width: 15%;" />
                    </colgroup>

                    <thead class="table-head align-middle">

                        <tr>
                            <th>Documents</th>
                            <th>Action</th>
                        </tr>

                    </thead>

                    @if (Model.fileNames != null && Model.fileNames.Any())
                    {
                        <tbody>

                            @foreach (var document in Model.fileNames)
                            {
                                <tr>
                                    <td>@document</td>
                                    <td>@document</td>
                                </tr>
                            }

                        </tbody>
                    }

                </table>

            </div>

            @if (Model.fileNames == null || !Model.fileNames.Any())
            {
                <div class="d-flex justify-content-center">No Documents Found</div>
            }

            <form method="post" asp-controller="Physician" asp-action="ConcludeCasePhysician">

                <input hidden asp-for="RequestId" />

                <div class="col-12 mt-3">
                    <div class="form-floating">
                        <textarea style="height:150px" class="form-control"
                                  placeholder="Leave a comment here" name="phyNotes" id="physician-notes-text-area"></textarea>
                        <label for="floatingTextarea2">Provider Notes</label>
                    </div>
                </div>

                <div class="d-flex justify-content-end mt-3">
                    <button class="btn btn-info text-white" type="submit"  id="conclude-care-btn">Conclude Care</button>
                </div>

            </form>
        </div>

    </div>

    <div style="height: 20px;"></div>

</div>

<script>

    $('.admin-tab').removeClass("active");
    $('#dashboard-tab').addClass("active");

</script>

<script>
    // $('#conclude-care-btn').click(function () {
    //     $.ajax({
    //         url: "/Physician/ConcludeCasePhysician",
    //         data: {
    //             requestId: @Model.RequestId,
    //             phyNotes: $('#physician-notes-text-area').val()
    //         },
    //         type: 'POST',
    //         success: function (result) {
    //             if (result) {
    //                 location.reload();
    //             }
    //         },
    //         error: function (error) {
    //             console.log(error);
    //             alert('Error Cancelling Request')
    //         },
    //     });

    // });
</script>