@model AdminDashboardViewModel

<div class="table-responsive mt-3 d-none d-md-block">
    <table class="table">

        @{
            int dstatus = Model.DashboardStatus;
        }
        @if (dstatus == 1 || dstatus == 5)
        {
            <colgroup>
                <col span="1" style="width: 17%;">
                <col span="1" style="width: 8%;">
                <col span="1" style="width: 9%;">
                <col span="1" style="width: 8%;">
                <col span="1" style="width: 12%;">
                <col span="1" style="width: 19%;">
                <col span="1" style="width: 12%;">
                <col span="1" style="width: 9%;">
                <col span="1" style="width: 6%;">
            </colgroup>
        }
        else if (dstatus == 2 || dstatus == 3)
        {
            <colgroup>
                <col span="1" style="width: 15%;">
                <col span="1" style="width: 8%;">
                <col span="1" style="width: 8%;">
                <col span="1" style="width: 8%;">
                <col span="1" style="width: 8%;">
                <col span="1" style="width: 12%;">
                <col span="1" style="width: 19%;">
                <col span="1" style="width: 8%;">
                <col span="1" style="width: 12%;">
                <col span="1" style="width: 6%;">
            </colgroup>
        }
        else if (dstatus == 4)
        {
            <colgroup>
                <col span="1" style="width: 17%;">
                <col span="1" style="width: 8%;">
                <col span="1" style="width: 9%;">
                <col span="1" style="width: 8%;">
                <col span="1" style="width: 12%;">
                <col span="1" style="width: 12%;">
                <col span="1" style="width: 9%;">
                <col span="1" style="width: 6%;">
            </colgroup>
        }
        else if (dstatus == 6)
        {
            <colgroup>
                <col span="1" style="width: 17%;">
                <col span="1" style="width: 8%;">
                <col span="1" style="width: 9%;">
                <col span="1" style="width: 8%;">
                <col span="1" style="width: 12%;">
                <col span="1" style="width: 9%;">
                <col span="1" style="width: 6%;">
            </colgroup>
        }

        @* <colgroup>
        <col span="1" style="width: 17%;">
        <col span="1" style="width: 8%;">
        <col span="1" style="width: 9%;">
        <col span="1" style="width: 8%;">
        <col span="1" style="width: 12%;">
        <col span="1" style="width: 19%;">
        <col span="1" style="width: 12%;">
        <col span="1" style="width: 9%;">
        <col span="1" style="width: 6%;">
        </colgroup> *@

        <thead class="table-head align-middle">
            <tr>

                <th>Name</th>
                @if (dstatus != 6)
                {
                    <th>Date Of Birth</th>
                }
                @if (dstatus == 1 || dstatus == 2 || dstatus == 3)
                {
                    <th>Requestor</th>
                }
                @if (dstatus == 5)
                {
                    <th>Region</th>
                }
                @if (dstatus != 1)
                {
                    <th>Physician Name</th>
                    <th>Date Of Service</th>
                }
                @if (dstatus == 1)
                {
                    <th>Request Date</th>
                }
                @if (dstatus != 5)
                {
                    <th>Phone</th>
                }
                <th>Address</th>
                @if (dstatus != 4 && dstatus != 6)
                {
                    <th>Notes</th>
                }
                <th>Chat With</th>
                <th style="text-align: center">Actions</th>
            </tr>
        </thead>

        <tbody class="align-middle" id="dashboard-table-body">
            @for (int i = 0; i < Model.adminRequests.Count; i++)
            {
                int type = Model.adminRequests[i].RequestType;

                string className = "", phoneTextName = "";

                switch (type)
                {
                    case 1:
                        className = "business-request-row";
                        phoneTextName = "Business";
                        break;
                    case 2:
                        className = "patient-request-row";
                        break;
                    case 3:
                        className = "family-friend-request-row";
                        phoneTextName = "Family/Friend";
                        break;
                    case 4:
                        className = "concierge-request-row";
                        phoneTextName = "Concierge";
                        break;
                }

                <tr class="@className">
                    <td>
                        <div class="d-flex align-items-center justify-content-between">
                            <span>@Model.adminRequests[i].PatientName</span>
                            <a href="mailto:@Model.adminRequests[i].Email">
                                <div class="white-border-btn p-1">
                                    <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 0 24 24"
                                         width="20px" fill="#FFFFFF">
                                        <path d="M0 0h24v24H0V0z" fill="none" />
                                        <path d="M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6zm-2 0l-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z" />
                                    </svg>
                                </div>
                            </a>
                        </div>
                    </td>
                    @if (dstatus != 6)
                    {
                        <td>@Model.adminRequests[i].DateOfBirth</td>
                    }
                    @if (dstatus == 1 || dstatus == 2 || dstatus == 3)
                    {
                        <td>@Model.adminRequests[i].Requestor</td>
                    }
                    @if (dstatus == 5)
                    {
                        <td>@Model.adminRequests[i].RegionName</td>
                    }
                    @if (dstatus != 1)
                    {
                        <td>@Model.adminRequests[i].PhysicianName</td>
                        <td>@Model.adminRequests[i].DateOfService</td>
                    }
                    @if (dstatus == 1)
                    {
                        <td>@Model.adminRequests[i].RequestDate</td>
                    }
                    @if (dstatus != 5)
                    {
                        <td>
                            <a style="text-decoration:none; color: white;" href="tel:@Model.adminRequests[i].PatientPhone">
                                <div class="white-border-btn px-2 py-1 align-items-center d-flex">
                                    <svg xmlns="http://www.w3.org/2000/svg" height="15px" viewBox="0 0 24 24" width="15px"
                                         fill="white">
                                        <path d="M0 0h24v24H0V0z" fill="none" />
                                        <path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z" />
                                    </svg>
                                    <span class="ms-1">@Model.adminRequests[i].PatientPhone</span>
                                </div>
                                <div>(Patient)</div>
                            </a>

                            @if (type != 2)
                            {
                                <a style="text-decoration:none; color: white;" href="tel:@Model.adminRequests[i].PatientPhone">
                                    <div class="white-border-btn px-2 py-1 align-items-center d-flex">
                                        <svg xmlns="http://www.w3.org/2000/svg" height="15px" viewBox="0 0 24 24" width="15px"
                                             fill="white">
                                            <path d="M0 0h24v24H0V0z" fill="none" />
                                            <path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z" />
                                        </svg>
                                        <span class="ms-1">@Model.adminRequests[i].Phone</span>
                                    </div>
                                    <div>(@phoneTextName)</div>
                                </a>
                            }

                        </td>
                    }
                    <td>@Model.adminRequests[i].Address</td>
                    @if (dstatus != 4 && dstatus != 6)
                    {
                        <td>@Model.adminRequests[i].Notes</td>
                    }
                    <td>

                        <div class="d-flex justify-content-between">
                            @if (dstatus != 1)
                            {
                                <div class="d-flex flex-grow-1 p-1 white-border-btn justify-content-center align-items-center" style="margin-right:5px">
                                    <svg xmlns="http://www.w3.org/2000/svg" height="15px" viewBox="0 0 24 24" width="15px"
                                         fill="white">
                                        <path d="M0 0h24v24H0V0z" fill="none" />
                                        <path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z" />
                                    </svg>
                                    <span class="ms-1">Patient</span>
                                </div>
                            }

                            <div class="d-flex flex-grow-1 p-1 white-border-btn justify-content-center align-items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" height="15px" viewBox="0 0 24 24" width="15px"
                                     fill="white">
                                    <path d="M0 0h24v24H0V0z" fill="none" />
                                    <path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z" />
                                </svg>
                                <span class="ms-1">Provider</span>
                            </div>
                        </div>

                    </td>
                    <td>
                        <div class="d-flex justify-content-center" style="margin: 0px 5px 0px 5px">
                            <div class="dropdown">
                                <a class="white-border-btn btn" id="dropdownMenu2" data-bs-toggle="dropdown" aria-expanded="false">
                                    <span class="text-white">Actions</span>
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                                    @if (dstatus == 1)
                                    {
                                        <li><button data-bs-toggle="modal" data-bs-target="#assignModal" class="dropdown-item assign-case-btn" data-id="@Model.adminRequests[i].RequestId" type="button">Assign Case</button></li>
                                        <li><button class="dropdown-item cancel-case-btn" type="button" data-name="@Model.adminRequests[i].PatientName" data-id="@Model.adminRequests[i].RequestId" data-bs-target="#cancelModal" data-bs-toggle="modal">Cancel Case</button></li>
                                        <li><a asp-controller="Admin" asp-action="ViewCase" asp-route-Requestid="@Model.adminRequests[i].RequestId" class="dropdown-item">View Case</a></li>
                                        <li><a asp-controller="Admin" asp-action="ViewNotes" asp-route-Requestid="@Model.adminRequests[i].RequestId" class="dropdown-item" type="button">View Notes</a></li>
                                        <li><button class="dropdown-item block-patient-btn" data-name="@Model.adminRequests[i].PatientName" data-id="@Model.adminRequests[i].RequestId" type="button" data-bs-toggle="modal" data-bs-target="#blockModal">Block Patient</button></li>
                                    }
                                    else
                                    {
                                        <li><a asp-controller="Admin" asp-action="ViewCase" asp-route-Requestid="@Model.adminRequests[i].RequestId" class="dropdown-item">View Case</a></li>
                                        <li><a asp-controller="Admin" asp-action="ViewUploads" asp-route-Requestid="@Model.adminRequests[i].RequestId" class="dropdown-item" type="button">View Uploads</a></li>
                                        <li><a asp-controller="Admin" asp-action="ViewNotes" asp-route-Requestid="@Model.adminRequests[i].RequestId" class="dropdown-item" type="button">View Notes</a></li>
                                    }
                                    @if (dstatus == 2)
                                    {
                                        <li><button data-bs-toggle="modal" data-bs-target="#transferModal" data-id="@Model.adminRequests[i].RequestId" class="dropdown-item transfer-case-btn" type="button">Transfer</button></li>
                                        <li><button data-bs-toggle="modal" data-bs-target="#ClearCaseModal" class="dropdown-item clear-case-btn" data-id="@Model.adminRequests[i].RequestId" type="button">Clear Case</button></li>
                                        <li><button class="dropdown-item" type="button">Send Agreement</button></li>
                                    }
                                    @if (dstatus == 3 || dstatus == 4)
                                    {
                                        <li><a asp-controller="Admin" asp-action="Orders" asp-route-requestId="@Model.adminRequests[i].RequestId" class="dropdown-item" type="button">Orders</a></li>
                                        <li><button class="dropdown-item" type="button">Doctors Note</button></li>
                                        <li><button class="dropdown-item" type="button">Encounter</button></li>
                                    }
                                    @if (dstatus == 5)
                                    {
                                        <li><a asp-controller="Admin" asp-action="Orders" asp-route-requestId="@Model.adminRequests[i].RequestId" class="dropdown-item" type="button">Orders</a></li>
                                        <li><button class="dropdown-item" type="button">Close Case</button></li>
                                        <li><button class="dropdown-item" type="button">Doctors Note</button></li>
                                        <li><button class="dropdown-item" type="button">Clear Case</button></li>
                                        <li><button class="dropdown-item" type="button">Encounter</button></li>
                                    }
                                </ul>
                            </div>
                        </div>
                    </td>

                </tr>

            }
        </tbody>

    </table>
</div>

<div class="col-12 mx-2 mt-1 d-md-none " style="background-color:#ebfafd">
    @for (int i = 0; i < Model.adminRequests.Count; i++)
    {

        string count = "hi" + i.ToString();


        <p class="row mx-1 shadow" style="background-color:#ebfafd">
            <a class="btn d-flex justify-content-start collapse-anchor mx-1" data-bs-toggle="collapse" href="@count" data-bs-target="#@count" role="button" aria-expanded="false" aria-controls="collapseExample">
                <div class="d-flex flex-column ">

                    <div class="row m-1 geeks">


                        <div class="d-flex justify-content-between w-100 m-2 ">
                            <div class="fs-5">@Model.adminRequests[i].PatientName</div>
                            @{
                                int type = Model.adminRequests[i].RequestType;
                            }
                            @if (type == 2)
                            {
                                <div class="filter-options  rounded d-flex align-items-center ms-2 " id="filter-patient">
                                    <div class="mx-1 fs-5">Patient</div>
                                    <svg height="15" width="15" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                        <circle fill="#5fbc61" r="45" cx="50" cy="50" stroke="grey" stroke-width="3" />
                                    </svg>
                                </div>

                            }
                            else if (type == 1)
                            {
                                <div class="filter-options mx-2  rounded d-flex align-items-center ms-2 " id="filter-business">
                                    <div class="mx-1 fs-5">Business</div>
                                    <svg height="15" width="15" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                        <circle fill="#e26277" r="45" cx="50" cy="50" stroke="grey" stroke-width="3" />
                                    </svg>
                                </div>

                            }
                            else if (type == 4)
                            {
                                <div class="filter-options mx-2  rounded d-flex align-items-center ms-2 " id="filter-friend">
                                    <div class="mx-1 fs-5">Family/Friends</div>
                                    <svg height="15" width="15" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                        <circle fill="#ed9124" r="45" cx="50" cy="50" stroke="grey" stroke-width="3" />
                                    </svg>
                                </div>
                            }
                            else if (type == 3)
                            {
                                <div class="filter-options mx-2  rounded d-flex align-items-center ms-2 " id="filter-concierge">
                                    <div class="mx-1 fs-5">Concierge</div>
                                    <svg height="15" width="15" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                        <circle fill="#007fc6" r="45" cx="50" cy="50" stroke="grey" stroke-width="3" />
                                    </svg>
                                </div>
                            }

                        </div>

                        <div class="d-flex justify-content-between w-100 m-2 data-bs-toggle="collapse" href="@count" data-bs-target="#@count" >
                            <div class="fs-5">@Model.adminRequests[i].Address</div>

                            <div class="">
                                <a class="btn btn-outline-info fw-bold mt-0 mb-3 me-2">

                                    <span class="mobile">Map</span>
                                </a>
                            </div>
                        </div>
                        <div class="d-flex">
                            <svg class="mx-2" xmlns="http://www.w3.org/2000/svg" data-name="Layer 1" viewBox="0 0 100 125" x="0px" y="0px" fill="#01bce9" width="30px" height="30px">
                                <defs>
                                    <style>
                                        .cls-1 {
                                            stroke-width: 0px;
                                        }
                                    </style>
                                </defs>
                                <path class="cls-1" d="M50,8c-23.16,0-42,18.84-42,42s18.84,42,42,42,42-18.84,42-42S73.16,8,50,8ZM50,88c-20.95,0-38-17.05-38-38S29.05,12,50,12s38,17.05,38,38-17.05,38-38,38Z" />
                                <path class="cls-1" d="M52,49.17v-23.17c0-1.1-.9-2-2-2s-2,.9-2,2v24c0,.53.21,1.04.59,1.41l16,16c.39.39.9.59,1.41.59s1.02-.2,1.41-.59c.78-.78.78-2.05,0-2.83l-15.41-15.41Z" />
                            </svg>

                            Wait time: <b> To Infinity and Beyond </b>

                        </div>
                        <div class="d-flex m-2">
                            <a asp-controller="Admin" asp-action="ViewCase" asp-route-RequestID="@Model.adminRequests[i].RequestId" class="btn rounded-pill" style="border:2px solid black;">View Case</a>
                        </div>


                    </div>


                </div>
            </a>
        </p>
        <div class="collapse" id="@count">
            <div class=" card-body m-0  " style="background-color:#ebfafd">
                <div class="d-flex flex-column m-0">
                    @if (dstatus != 6)
                    {
                        <div class="d-flex mt-3">
                            <svg class="ms-2" xmlns="http://www.w3.org/2000/svg" height="24" fill="#01bce9" viewBox="0 -960 960 960" width="24"><path d="M200-80q-33 0-56.5-23.5T120-160v-560q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H200Zm0-80h560v-400H200v400Zm0-480h560v-80H200v80Zm0 0v-80 80Zm280 240q-17 0-28.5-11.5T440-440q0-17 11.5-28.5T480-480q17 0 28.5 11.5T520-440q0 17-11.5 28.5T480-400Zm-160 0q-17 0-28.5-11.5T280-440q0-17 11.5-28.5T320-480q17 0 28.5 11.5T360-440q0 17-11.5 28.5T320-400Zm320 0q-17 0-28.5-11.5T600-440q0-17 11.5-28.5T640-480q17 0 28.5 11.5T680-440q0 17-11.5 28.5T640-400ZM480-240q-17 0-28.5-11.5T440-280q0-17 11.5-28.5T480-320q17 0 28.5 11.5T520-280q0 17-11.5 28.5T480-240Zm-160 0q-17 0-28.5-11.5T280-280q0-17 11.5-28.5T320-320q17 0 28.5 11.5T360-280q0 17-11.5 28.5T320-240Zm320 0q-17 0-28.5-11.5T600-280q0-17 11.5-28.5T640-320q17 0 28.5 11.5T680-280q0 17-11.5 28.5T640-240Z" /></svg>

                            <div class="ms-1">
                                Date of birth : @Model.adminRequests[i].DateOfBirth
                            </div>
                        </div>
                    }
                    <div class="d-flex mt-3">
                        <svg class="ms-2" xmlns="http://www.w3.org/2000/svg" height="24" fill="#01bce9" viewBox="0 -960 960 960" width="24"><path d="M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm640-480L501-453q-5 3-10.5 4.5T480-447q-5 0-10.5-1.5T459-453L160-640v400h640v-400ZM480-520l320-200H160l320 200ZM160-640v10-59 1-32 32-.5 58.5-10 400-400Z" /></svg>

                        <div class="ms-1">
                            Email : @Model.adminRequests[i].Email
                        </div>
                    </div>


                    @if (dstatus != 5)
                    {
                        <div class="d-flex mt-3">
                            <svg class="ms-2" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" fill="#01bce9" width="24"><path d="M798-120q-125 0-247-54.5T329-329Q229-429 174.5-551T120-798q0-18 12-30t30-12h162q14 0 25 9.5t13 22.5l26 140q2 16-1 27t-11 19l-97 98q20 37 47.5 71.5T387-386q31 31 65 57.5t72 48.5l94-94q9-9 23.5-13.5T670-390l138 28q14 4 23 14.5t9 23.5v162q0 18-12 30t-30 12ZM241-600l66-66-17-94h-89q5 41 14 81t26 79Zm358 358q39 17 79.5 27t81.5 13v-88l-94-19-67 67ZM241-600Zm358 358Z" /></svg>

                            <div class="ms-1">
                                Patient : @Model.adminRequests[i].PatientPhone;
                            </div>
                        </div>
                    }
                    @if (dstatus == 2 || dstatus == 3 || dstatus == 5)
                    {
                        <div class="d-flex mt-3">
                            <svg class="ms-2" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" fill="#01bce9" width="24"><path d="M798-120q-125 0-247-54.5T329-329Q229-429 174.5-551T120-798q0-18 12-30t30-12h162q14 0 25 9.5t13 22.5l26 140q2 16-1 27t-11 19l-97 98q20 37 47.5 71.5T387-386q31 31 65 57.5t72 48.5l94-94q9-9 23.5-13.5T670-390l138 28q14 4 23 14.5t9 23.5v162q0 18-12 30t-30 12ZM241-600l66-66-17-94h-89q5 41 14 81t26 79Zm358 358q39 17 79.5 27t81.5 13v-88l-94-19-67 67ZM241-600Zm358 358Z" /></svg>

                            <div class="ms-1">
                                Transfer :Admin transferred to  @Model.adminRequests[i].PhysicianName on @Model.adminRequests[i].RequestDate
                            </div>
                        </div>
                    }
                    @if (dstatus != 1)
                    {
                        <div class="d-flex mt-3">
                            <svg class="ms-2" xmlns="http://www.w3.org/2000/svg" height="24" fill="#01bce9" viewBox="0 -960 960 960" width="24"><path d="M200-80q-33 0-56.5-23.5T120-160v-560q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H200Zm0-80h560v-400H200v400Zm0-480h560v-80H200v80Zm0 0v-80 80Zm280 240q-17 0-28.5-11.5T440-440q0-17 11.5-28.5T480-480q17 0 28.5 11.5T520-440q0 17-11.5 28.5T480-400Zm-160 0q-17 0-28.5-11.5T280-440q0-17 11.5-28.5T320-480q17 0 28.5 11.5T360-440q0 17-11.5 28.5T320-400Zm320 0q-17 0-28.5-11.5T600-440q0-17 11.5-28.5T640-480q17 0 28.5 11.5T680-440q0 17-11.5 28.5T640-400ZM480-240q-17 0-28.5-11.5T440-280q0-17 11.5-28.5T480-320q17 0 28.5 11.5T520-280q0 17-11.5 28.5T480-240Zm-160 0q-17 0-28.5-11.5T280-280q0-17 11.5-28.5T320-320q17 0 28.5 11.5T360-280q0 17-11.5 28.5T320-240Zm320 0q-17 0-28.5-11.5T600-280q0-17 11.5-28.5T640-320q17 0 28.5 11.5T680-280q0 17-11.5 28.5T640-240Z" /></svg>
                            <div class="ms-1">
                                Date of Service :@Model.adminRequests[i].DateOfService  ;
                            </div>
                        </div>

                    }
                    @if (dstatus != 1)
                    {
                        <div class="d-flex mt-3">
                            <svg class="ms-2" xmlns="http://www.w3.org/2000/svg" height="24" fill="#01bce9" viewBox="0 -960 960 960" width="24"><path d="M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-240v-32q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q66 0 130 15.5T736-378q29 15 46.5 43.5T800-272v32q0 33-23.5 56.5T720-160H240q-33 0-56.5-23.5T160-240Zm80 0h480v-32q0-11-5.5-20T700-306q-54-27-109-40.5T480-360q-56 0-111 13.5T260-306q-9 5-14.5 14t-5.5 20v32Zm240-320q33 0 56.5-23.5T560-640q0-33-23.5-56.5T480-720q-33 0-56.5 23.5T400-640q0 33 23.5 56.5T480-560Zm0-80Zm0 400Z" /></svg>
                            <div class="ms-1">
                                Physician :@Model.adminRequests[i].PhysicianName  ;
                            </div>
                        </div>

                    }
                    @if (dstatus == 1 || dstatus == 2 || dstatus == 3)
                    {
                        <div class="d-flex mt-3">
                            <svg class="ms-2" xmlns="http://www.w3.org/2000/svg" height="24" fill="#01bce9" viewBox="0 -960 960 960" width="24"><path d="M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-240v-32q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q66 0 130 15.5T736-378q29 15 46.5 43.5T800-272v32q0 33-23.5 56.5T720-160H240q-33 0-56.5-23.5T160-240Zm80 0h480v-32q0-11-5.5-20T700-306q-54-27-109-40.5T480-360q-56 0-111 13.5T260-306q-9 5-14.5 14t-5.5 20v32Zm240-320q33 0 56.5-23.5T560-640q0-33-23.5-56.5T480-720q-33 0-56.5 23.5T400-640q0 33 23.5 56.5T480-560Zm0-80Zm0 400Z" /></svg>
                            <div class="ms-1">
                                Requestor  :@Model.adminRequests[i].Requestor;
                            </div>
                        </div>

                    }
                    @if (dstatus == 5)
                    {
                        <div class="d-flex mt-3">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24" fill="#01bce9" viewBox="0 -960 960 960" width="24"><path d="M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-240v-32q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q66 0 130 15.5T736-378q29 15 46.5 43.5T800-272v32q0 33-23.5 56.5T720-160H240q-33 0-56.5-23.5T160-240Zm80 0h480v-32q0-11-5.5-20T700-306q-54-27-109-40.5T480-360q-56 0-111 13.5T260-306q-9 5-14.5 14t-5.5 20v32Zm240-320q33 0 56.5-23.5T560-640q0-33-23.5-56.5T480-720q-33 0-56.5 23.5T400-640q0 33 23.5 56.5T480-560Zm0-80Zm0 400Z" /></svg>
                            <div class="ms-1">
                                Region  :@Model.adminRequests[i].RegionName;
                            </div>
                        </div>
                    }


                </div>
                <div class="row mt-4 m-0">
                    @if (dstatus == 1)
                    {
                        <div class="col-6 ">
                            <button data-bs-toggle="modal" data-bs-target="#AssignModal" class="btn w-100 btn-outline-light rounded-pill  " style="background-color:orchid">Assign Case</button>
                        </div>
                        <div class="col-6  ">
                            <button data-bs-toggle="modal" data-id="@Model.adminRequests[i].RequestId" data-name="@Model.adminRequests[i].PatientName" data-bs-target="#cancelModal" class="cancel-case-btn btn w-100 btn-danger btn-outline-danger  btn-outline-light rounded-pill">Cancel case</button>
                        </div>
                        <div class="col-6  ">
                            <button data-bs-toggle="modal" data-name="@Model.adminRequests[i].PatientName" data-id="@Model.adminRequests[i].RequestId" data-bs-target="#BlockModal" class="block-patient-btn btn w-100 btn-danger btn-outline-danger  btn-outline-light rounded-pill">Block Patient</button>
                        </div>
                    }
                    @if (dstatus == 2)
                    {
                        <div class="col-6 ">
                            <button class="btn w-100 btn-warning btn-outline-warning btn-outline-light rounded-pill">Send agreement</button>
                        </div>

                        <div class="col-6 ">
                            <button data-bs-toggle="modal" data-id="@Model.adminRequests[i].RequestId" data-bs-target="#transferModal" class="transfer-btn btn w-100 btn-info btn-outline-info btn-outline-light rounded-pill">Transfer</button>
                        </div>
                    }
                    @if (dstatus == 5)
                    {

                        <div class="col-6 ">
                            <button class="btn w-100 btn-danger btn-outline-danger btn-outline-light rounded-pill">Close Case</button>
                        </div>

                    }
                    <div class="col-6 ">
                        <a asp-controller="Admin" asp-action="ViewNotes" asp-route-RequestID="@Model.adminRequests[i].RequestId" class="btn w-100 btn-success btn-outline-success btn-outline-light rounded-pill">View Notes</a>
                    </div>
                    @if (dstatus == 3 || dstatus == 4)
                    {

                        <div class="col-6 ">
                            <a asp-controller="Admin" asp-action="Orders" asp-route-RequestID="@Model.adminRequests[i].RequestId" class="btn w-100 btn-warning  btn-outline-warning   btn-outline-light rounded-pill">Orders</a>
                        </div>

                    }
                    @if (dstatus == 3 || dstatus == 4 || dstatus == 5)
                    {

                        <div class="col-6 ">
                            <button class="btn w-100  btn-outline-light rounded-pill" style="background-color:darkseagreen">Doctor's Notes'</button>
                        </div>
                        <div class="col-6 ">
                            <button class="btn w-100 btn-success  btn-outline-success  btn-outline-light rounded-pill">Encounter</button>
                        </div>

                    }
                    @if (dstatus != 1)
                    {
                        <div class="col-6 ">
                            <a asp-controller="Admin" asp-action="ViewUploads" asp-route-requestId="@Model.adminRequests[i].RequestId" class="btn w-100 btn-success btn-outline-success btn-outline-light rounded-pill">View Uploads</a>
                        </div>
                    }

                    @if (dstatus == 2 || dstatus == 5)
                    {
                        <div class="col-6 ">
                            <button class="btn w-100 btn-warning  btn-outline-warning  btn-outline-light rounded-pill">Clear Case</button>
                        </div>
                    }
                    <div class="col-6 ">
                        <button class="btn w-100 btn-success btn-outline-success btn-outline-light rounded-pill">Email</button>
                    </div>

                </div>

            </div>
        </div>

    }


</div>


<div class="d-flex justify-content-center">
    <nav aria-label="Page navigation example">
        <ul class="pagination align-items-center">
            <li class="page-item"><button onclick="loadPreviousPage(@Model.CurrentPage)" class="page-link">Previous</button></li>
            <li class="page-item"> <span class="fw-bold mx-2"> @Model.CurrentPage </span></li>
            <li class="page-item"><button onclick="loadNextPage(@Model.CurrentPage)" class="page-link">Next</button></li>
        </ul>
    </nav>
</div>

<script>

    $('.assign-case-btn').click(function () {
        var Id = $(this).data("id");
        $('#assignCaseRequestId').val(Id);
    });

    $('.transfer-case-btn').click(function () {
        var Id = $(this).data("id");
        $('#transferCaseRequestId').val(Id);
    });

    $('.cancel-case-btn').click(function () {
        var Id = $(this).data("id");
        $('#cancelCaseRequestId').val(Id);

        var Name = $(this).data("name");
        $('#cancelModalPatientName').text(Name);
    });

    $('.block-patient-btn').click(function () {
        var Id = $(this).data("id");
        $('#blockCaseRequestId').val(Id);

        var Name = $(this).data("name");
        $('#blockModalPatientName').text(Name);
    });

    $('.clear-case-btn').click(function () {
        var Id = $(this).data("id");
        $('#clearCaseRequestId').val(Id);

    });

</script>

<script>

    $('#assign-modal-submit-btn').on('click', function (event) {
        event.preventDefault();
        $.ajax({
            url: "/Admin/AssignCaseModal",
            data: { notes: $('#assignCaseNotes').val(), requestid: $('#assignCaseRequestId').val(), physicianid: $('#assignCasePhysician').val() },
            type: 'POST',
            success: function (result) {
                location.reload();
            },
            error: function (error) {
                console.log(error);
                alert('Error Cancelling Request')
            },
        });
    });

    $('#transfer-modal-submit-btn').on('click', function (event) {

        event.preventDefault();

        $.ajax({
            url: "/Admin/TransferCaseModal",
            data: { notes: $('#transferCaseNotes').val(), requestid: $('#transferCaseRequestId').val(), physicianid: $('#transferCasePhysician').val() },
            type: 'POST',
            success: function (result) {
                location.reload();
            },
            error: function (error) {
                console.log(error);
                alert('Error Cancelling Request')
            },
        });

    });

    $('#cancel-modal-submit-btn').on('click', function (event) {
        event.preventDefault();
        $.ajax({
            url: "/Admin/CancelCaseModal",
            data: { reason: $('#cancelModalCaseTag').val(), notes: $('#cancelCaseNotes').val(), requestid: $('#cancelCaseRequestId').val() },
            type: 'POST',
            success: function (result) {
                location.reload();
            },
            error: function (error) {
                console.log(error);
                alert('Error Cancelling Request')
            },
        });

    });

    $('#block-modal-submit-btn').on('click', function (event) {
        event.preventDefault();
        $.ajax({
            url: "/Admin/BlockCaseModal",
            data: { reason: $('#blockCaseModalNotes').val(), requestid: $('#blockCaseRequestId').val() },
            type: 'POST',
            success: function (result) {
                location.reload();
            },
            error: function (error) {
                console.log(error);
                alert('Error Cancelling Request')
            },
        });

    });

    $('#clear-modal-submit-btn').on('click', function (e) {
        e.preventDefault();

        $.ajax({
            url: "/Admin/ClearCaseModal",
            data: { requestid: $('#clearCaseRequestId').val() },
            type: 'POST',
            success: function (result) {
                location.reload();
            },
            error: function (error) {
                console.log(error);
                alert('Error Cancelling Request')
            },
        });

    });
</script>

<script>

    $('#assignCaseRegion').change(function (event) {
        event.preventDefault();
        var region = $('option:selected', this).val();

        $.ajax({
            url: '/Admin/GetPhysicianByRegion',
            type: 'POST',
            data: {
                regionId: region,
            },
            success: function (result) {
                $('#assignCasePhysician').empty();
                $('#assignCasePhysician').append($('<option>', {
                    value: 0,
                    text: '-- Select Physician --',
                    selected: true,
                    disabled: true
                }));
                $.each(result, function (index, object) {

                    $('#assignCasePhysician').append($('<option>', {
                        value: object["physicianId"],
                        text: object["physicianName"]
                    }));

                });
            },
            error: function (err) {
                console.error(err);
            }
        });

    });

    $('#transferCaseRegion').change(function (event) {
        event.preventDefault();

        var region = $('option:selected', this).val();

        $.ajax({
            url: '/Admin/GetPhysicianByRegion',
            type: 'POST',
            data: {
                regionId: region,
            },
            success: function (result) {
                $('#transferCasePhysician').empty();
                $('#transferCasePhysician').append($('<option>', {
                    value: 0,
                    text: '-- Select Physician --',
                    selected: true,
                    disabled: true
                }));
                $.each(result, function (index, object) {

                    $('#transferCasePhysician').append($('<option>', {
                        value: object["physicianId"],
                        text: object["physicianName"]
                    }));

                });
            },
            error: function (err) {
                console.error(err);
            }
        });
    });
</script>