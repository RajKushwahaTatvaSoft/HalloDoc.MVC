@model CloseCaseViewModel
@{
    Layout = "_AdminDashboardLayout";
}

<div class="bg-body-secondary " style="min-height: 82vh;">
    <div class="mx-auto pb-3" style="width:70%; padding-top: 3%;">
        <div class="d-flex justify-content-between my-2">
            <h4>Close Case</h4>
            <a asp-action="AdminDashboard">
                <button type="button" class="btn btn-primary btn text-decoration-none border border-info bg-transparent text-info shadow  ">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0" />
                    </svg>
                    Back
                </button>
            </a>
        </div>
        <div class="PatientInfoTable border rounded-top shadow bg-white p-4">
            <h6> patient name</h6>
            <div class="d-flex justify-content-between mt-1">
                <span class="text-info fs-4 fw-bold">@Model.FirstName  @Model.LastName<span class="text-secondary fw-bold fs-6"> (ConfirmationNumber)</span></span>
                <button type="button" id="downloadAllBtn" class="btn btn-primary btn text-decoration-none border border-info bg-white text-info shadow-none mx-2">Create Invoice Through Quickbooks</button>
            </div>

            <div class="d-flex justify-content-between mt-3">
                <h4>Documents</h4>

            </div>
        </div>
        <div class="bg-white">
            <table class="table table-borderless mb-5">
                <thead class=" table-secondary">
                    <tr class=" table-secondary">
                        <td scope="col" class="text-start fw-bold text-secondary"></td>
                        <td scope="col" class="text-center fw-bold text-secondary">
                            UploadDate<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5" />
                            </svg>
                        </td>
                        <td scope="col" class="text-end pe-5 fw-bold text-secondary ">Action</td>
                    </tr>
                </thead>
                <tbody class="mx-3">
                    @foreach (var item in Model.Files)
                    {
                        <tr class="mx-3" style="border-bottom: 1px solid grey ;">
                            <td class="text-start align-middle ps-3 ms-3">
                                <svg height="20px" width="20px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                     viewBox="0 0 309.267 309.267" xml:space="preserve"><g>
                                <path style="fill:#E2574C;" d="M38.658,0h164.23l87.049,86.711v203.227c0,10.679-8.659,19.329-19.329,19.329H38.658 c-10.67,0-19.329-8.65-19.329-19.329V19.329C19.329,8.65,27.989,0,38.658,0z" />
                                <path style="fill:#B53629;" d="M289.658,86.981h-67.372c-10.67,0-19.329-8.659-19.329-19.329V0.193L289.658,86.981z" />
                                <path style="fill:#FFFFFF;" d="M217.434,146.544c3.238,0,4.823-2.822,4.823-5.557c0-2.832-1.653-5.567-4.823-5.567h-18.44 c-3.605,0-5.615,2.986-5.615,6.282v45.317c0,4.04,2.3,6.282,5.412,6.282c3.093,0,5.403-2.242,5.403-6.282v-12.438h11.153 c3.46,0,5.19-2.832,5.19-5.644c0-2.754-1.73-5.49-5.19-5.49h-11.153v-16.903C204.194,146.544,217.434,146.544,217.434,146.544z M155.107,135.42h-13.492c-3.663,0-6.263,2.513-6.263,6.243v45.395c0,4.629,3.74,6.079,6.417,6.079h14.159 c16.758,0,27.824-11.027,27.824-28.047C183.743,147.095,173.325,135.42,155.107,135.42z M155.755,181.946h-8.225v-35.334h7.413 c11.221,0,16.101,7.529,16.101,17.918C171.044,174.253,166.25,181.946,155.755,181.946z M106.33,135.42H92.964 c-3.779,0-5.886,2.493-5.886,6.282v45.317c0,4.04,2.416,6.282,5.663,6.282s5.663-2.242,5.663-6.282v-13.231h8.379 c10.341,0,18.875-7.326,18.875-19.107C125.659,143.152,117.425,135.42,106.33,135.42z M106.108,163.158h-7.703v-17.097h7.703 c4.755,0,7.78,3.711,7.78,8.553C113.878,159.447,110.863,163.158,106.108,163.158z" /></g></svg>

                                @item.Filename
                            </td>
                            <td class="text-center align-middle">
                                @item.Createddate
                            </td>
                            <td class="text-end pe-4 align-middle">
                                <a href="/Files/@item.Filename" class="btn btn-primary btn text-decoration-none border border-info bg-white text-info shadow-none me-4 " target="_blank" download="">
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                         width="24"
                                         height="24"
                                         fill="currentColor"
                                         class="bi bi-cloud-arrow-up"
                                         viewBox="0 0 16 16">
                                        <path fill-rule="evenodd"
                                              d="M7.646 5.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708z" />
                                        <path d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383m.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z" />
                                    </svg>
                                </a>

                            </td>
                        </tr>
                    }
                </tbody>
            </table>

            <form class="bg-white px-3" asp-controller="Admin" asp-action="CloseCase" asp-route-id="@Model.requestid">
                <h4>Patient Information</h4>
                <div class="row py-2">
                    <div class="col col-12 col-md-6">
                        <div class="form-floating mb-3">
                            <input type="text"
                                   asp-for="FirstName"
                                   class="form-control changable"
                                   id="floatingInput"
                                   mailto:placeholder="name@example.com" disabled />
                            <label for="floatingInput">First Name</label>
                        </div>
                    </div>
                    <div class="col col-12 col-md-6 mb-3">
                        <div class="form-floating">
                            <input type="text"
                                   asp-for="LastName"
                                   class="form-control changable"
                                   id="floatingPassword"
                                   placeholder="Password" disabled />
                            <label for="floatingPassword">Last Name</label>

                        </div>
                    </div>

                    <div class="col col-md-6 col-12">
                        <div class="form-floating mb-3">
                            <input type="text"
                                   asp-for="Dob"
                                   class="form-control changable"
                                   id="floatingPassword"
                                   placeholder="Password" disabled />
                            <label for="floatingPassword">Date Of Birth</label>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 d-flex">
                        <div class="form-floating mb-2" style="width: 80%;">
                            <input type="tel"
                                   asp-for="PhoneNumber"
                                   class="form-control changable"
                                   placeholder="PhoneNumber" disabled />
                            <label for="floatingPassword">Phone No.</label>
                        </div>
                        <button class=" btn btn-outline-info h-75 ms-2 px-0" style="width: 20%;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-telephone" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z" />
                            </svg>
                        </button>
                    </div>
                    <div class="col-12 col-md-6">
                        <div class="form-floating mb-3">
                            <input type="email" id="email"
                                   class="form-control"
                                   asp-for="Email"
                                   id="floatingInput"
                                   mailto:placeholder="name@example.com" disabled />
                            <label for="floatingInput">Email</label>

                        </div>
                    </div>
                    <div class="d-flex justify-content-end mb-4">
                        <button type="button" onclick="toggleEdit()" class="btn btn-info p-3 text-light fw-semibold me-2" id="EditBtn" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                            Edit
                        </button>
                        <button type="submit" class="btn btn-info p-3 text-light fw-semibold me-2" id="SaveBtn" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                            Save
                        </button>
                        <button type="button" onclick="toggleCancel()" class="btn btn-danger p-3 text-light fw-semibold me-2" id="CancleBtn" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                            Cancle
                        </button>
                        <a asp-action="CloseInstance" asp-controller="Admin" asp-route-reqid="@Model.requestid">
                            <button type="button" class="btn btn-outline-info p-3 fw-semibold me-2" id="closeCase">
                                Close Case
                            </button>
                        </a>
                    </div>
                </div>
            </form>
        </div>

    </div>
</div>

<script>

    $("#CancleBtn").hide();
    $("#SaveBtn").hide();


    function toggleEdit() {

        var inputFields = document.querySelectorAll('.changable');


        inputFields.forEach(function (input) {
            input.disabled = !input.disabled;
        });

        $("#CancleBtn").show();
        $("#EditBtn").hide();
        $("#closeCase").hide();
        $("#SaveBtn").show();
    }


    function toggleCancel() {
        var inputFields = document.querySelectorAll('.changable');

        // Toggle the disabled attribute for each input field
        inputFields.forEach(function (input) {
            input.disabled = !input.disabled;
        });

        $("#EditBtn").show();
        $("#closeCase").show();
        $("#CancleBtn").hide();
        $("#SaveBtn").hide();
    }

</script>
