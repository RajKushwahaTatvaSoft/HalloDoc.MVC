@model ProviderOnCallViewModel
@{
    Layout = "_AdminDashboardLayout";
}

<div class="container-fluid mt-4">
    <div class="container-fluid  mt-4" style="max-width:1400px">
        <div class="mt-4 row d-flex justify-content-between">
            <h4 class="fw-bold col-xl-11  col-9 col-xs-8">
                MDs On Call
            </h4>
            <button class=" col-xl-1 col-2 col-xs-3  btn btn-outline-info align-content-end " onclick="history.back(-1)">
                <svg xmlns="http://www.w3.org/2000/svg" fill="#01bce9" width="15" height="15" viewBox="0 -960 960 960">
                    <path d="m142-480 294 294q15 15 14.5 35T435-116q-15 15-35 15t-35-15L57-423q-12-12-18-27t-6-30q0-15 6-30t18-27l308-308q15-15 35.5-14.5T436-844q15 15 15 35t-15 35L142-480Z" />
                </svg>
                <span>Back</span>
            </button>
        </div>

        <div class="row  border-radius white-back  d-flex px-0 mt-4 align-items-center justify-content-between">


            <div class="col-12 col-md-3 mt-md-0 mt-2 grey-back d-flex normal-input rounded align-items-start justify-content-start  ">
                <svg class="mt-2" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 50 50">
                    <path d="M 21 3 C 11.654545 3 4 10.654545 4 20 C 4 29.345455 11.654545 37 21 37 C 24.701287 37 28.127393 35.786719 30.927734 33.755859 L 44.085938 46.914062 L 46.914062 44.085938 L 33.875 31.046875 C 36.43682 28.068316 38 24.210207 38 20 C 38 10.654545 30.345455 3 21 3 z M 21 5 C 29.254545 5 36 11.745455 36 20 C 36 28.254545 29.254545 35 21 35 C 12.745455 35 6 28.254545 6 20 C 6 11.745455 12.745455 5 21 5 z">
                    </path>
                </svg>
                <select id="filter-regions" class="grey-back form-select border-0">
                    <option selected>All Regions</option>
                    @foreach(var region in Model.regions)
                    {
                        <option value="@region.Regionid">@region.Name</option>
                    }

                </select>
            </div>

            <div class="col-md-7 p-0 mt-md-0 mt-2 mx-0 col-12 d-flex flex-wrap  align-items-center justify-content-md-end ">

                <button onclick="history.back(-1)" class="btn btn-info d-flex flex-wrap justify-content-md-end mt-md-0 mt-2 mx-1 text-white">
                    Calender View
                </button>

                <a asp-controller="Admin" asp-action="RequestedShift" class="btn btn-info mx-1 d-flex flex-wrap justify-content-md-end mt-md-0 mt-2  text-white">
                    Shifts for Review
                </a>

            </div>
        </div>
        <div id="POCpartialDiv" class=" mt-4" style="">
        </div>
    </div>
</div>

<script>

    $('.admin-tab').removeClass("active");
    $('#provider-tab').addClass("active");

</script>

<script>

    var region_filter = 0;
    loadPage(region_filter);
    $('.header-tab').removeClass("active-header");
    $('#provider-tab').addClass("active-header");
    $('#provider-tab').removeClass("text-grey");

    $("#filter-regions").change(function () {
        region_filter = $('#filter-regions').val();
        loadPage(region_filter);
    });

    function loadPage(region_filter) {
        console.log("poc");
        $.ajax({
            url: "/Admin/POCpartial",
            type: 'POST',
            data: { regionFilter: region_filter },
            success: function (result) {
                $('#POCpartialDiv').html(result);
            },
            error: function (error) {
                console.log(error);
                alert('error fetching details')
            },
        });
    }
</script>