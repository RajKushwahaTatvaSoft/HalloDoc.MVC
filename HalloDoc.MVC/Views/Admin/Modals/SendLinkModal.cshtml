@model SendLinkModel

<partial name="_ValidationScriptsPartial" />

<div class="modal fade" id="sendLinkModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header bg-info">
                <div class="modal-dark modal-title text-white" id="exampleModalLongTitle">
                    Send mail to patient for submitting request
                </div>
                <button type="button" class="btn" aria-label="Close" data-bs-dismiss="modal">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"
                         fill="#FFFFFF">
                        <path d="M0 0h24v24H0V0z" fill="none" />
                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z" />
                    </svg>
                </button>
            </div>

            <form method="post" asp-controller="Admin" asp-action="SendLinkForSubmitRequest" id="send-link-modal-form">
                <div class="d-flex justify-content-center my-5" id="loading-div">
                    <div class="loading-animation"></div>
                </div>

                <div class="modal-body">

                    <div class="modal-flex my-3">

                        <input hidden />
                        <div class="col-12">
                            <div class="form-floating">
                                <input asp-for="FirstName" type="text" class="form-control" placeholder="First Name">
                                <label for="floatingInput">First Name</label>
                                <span class="text-danger" asp-validation-for="FirstName"></span>
                            </div>
                        </div>

                        <div class="col-12 mt-3">
                            <div class="form-floating">
                                <input asp-for="LastName" type="text" class="form-control" placeholder="Last Name">
                                <label for="floatingInput">Last Name</label>
                                <span class="text-danger" asp-validation-for="LastName"></span>
                            </div>
                        </div>

                        <div class="col-12 mt-3">
                            <div class="form-floating w-100">
                                <input asp-for="CountryCode" id="send-link-phone-country" hidden style="height:60px;" />
                                <input asp-for="Phone" id="send-link-phone" class="py-4 form-control" type="tel" style="height:60px;" />
                                <span class="text-danger" asp-validation-for="Phone"></span>
                            </div>
                        </div>

                        <div class="col-12 mt-3">
                            <div class="form-floating">
                                <input asp-for="Email" type="text" class="form-control" placeholder="Email">
                                <label for="floatingInput">Email</label>
                                <span class="text-danger" asp-validation-for="Email"></span>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" onclick="setCountryCode()" class="btn btn-info text-white">Submit</button>
                    <button type="button" class="btn" data-bs-dismiss="modal">Cancel</button>
                </div>
            </form>

        </div>
    </div>
</div>

<script>

    let loading_div = document.getElementById('loading-div');
    loading_div.setAttribute('style', 'display:none !important;');

    sendLinkInputField = document.getElementById("send-link-phone");
    sendLinkField = window.intlTelInput(sendLinkInputField, {
        utilsScript:
            "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
        preferredCountries: ["in"],
        separateDialCode: true,
        initialCountry: "in"
    });

    function setCountryCode() {

        let countryCode = document.getElementById("send-link-phone-country");
        countryCode.value = sendLinkField.getSelectedCountryData().dialCode;

    }

    $('#send-link-modal-form').submit(function (event) {
        loading_div.setAttribute('style', 'display:flex !important;');
        $('.modal-body').hide();
    });

</script>