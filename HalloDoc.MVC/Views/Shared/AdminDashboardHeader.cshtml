@using Business_Layer.Utilities
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor Accessor

<style>

    #provider-parent:hover {
        cursor: pointer;
    }

        #provider-parent:hover .dropdown-menu {
            display: block;
        }

    #access-parent:hover {
        cursor: pointer;
    }

        #access-parent:hover .dropdown-menu {
            display: block;
        }

    #record-parent:hover {
        cursor: pointer;
    }

        #record-parent:hover .dropdown-menu {
            display: block;
        }
</style>

<header class="">

    <div class="d-flex mx-3 align-items-center justify-content-between">

        <div class="d-md-none">

            <a class="navbar-toggler shadow-none text-decoration-none" class="btn btn-info" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button" aria-controls="offcanvasExample">
                <span class="navbar-toggler-icon"></span>
                <svg class="mb-3 navbar-toggler-icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="24px" height="24px" viewBox="0,0,256,256">
                    <g fill="#01bce9" fill-rule="nonzero" stroke="none" stroke-width="0" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(8.53333,8.53333)"><path d="M3,7c-0.36064,-0.0051 -0.69608,0.18438 -0.87789,0.49587c-0.18181,0.3115 -0.18181,0.69676 0,1.00825c0.18181,0.3115 0.51725,0.50097 0.87789,0.49587h24c0.36064,0.0051 0.69608,-0.18438 0.87789,-0.49587c0.18181,-0.3115 0.18181,-0.69676 0,-1.00825c-0.18181,-0.3115 -0.51725,-0.50097 -0.87789,-0.49587zM3,14c-0.36064,-0.0051 -0.69608,0.18438 -0.87789,0.49587c-0.18181,0.3115 -0.18181,0.69676 0,1.00825c0.18181,0.3115 0.51725,0.50097 0.87789,0.49587h24c0.36064,0.0051 0.69608,-0.18438 0.87789,-0.49587c0.18181,-0.3115 0.18181,-0.69676 0,-1.00825c-0.18181,-0.3115 -0.51725,-0.50097 -0.87789,-0.49587zM3,21c-0.36064,-0.0051 -0.69608,0.18438 -0.87789,0.49587c-0.18181,0.3115 -0.18181,0.69676 0,1.00825c0.18181,0.3115 0.51725,0.50097 0.87789,0.49587h24c0.36064,0.0051 0.69608,-0.18438 0.87789,-0.49587c0.18181,-0.3115 0.18181,-0.69676 0,-1.00825c-0.18181,-0.3115 -0.51725,-0.50097 -0.87789,-0.49587z"></path></g></g>
                </svg>
            </a>

        </div>

        <img src="/images/hallo_doc_logo.png" alt="logo_icon" height="70px">

        <div>

            <span class="mx-1 d-none d-md-inline">Welcome <b>@Accessor.HttpContext?.Session.GetString("userName")</b></span>

            <a asp-controller="Admin" asp-action="Logout" class="btn btn-outline-info shadow-none night-mode-btn">

                <svg class="d-flex d-md-none" fill="#00ffff" height="24px" width="24px" version="1.1" id="Capa_1"
                     xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                     viewBox="0 0 384.971 384.971" xml:space="preserve">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                <g>
                <g id="Sign_Out">
                <path d="M180.455,360.91H24.061V24.061h156.394c6.641,0,12.03-5.39,12.03-12.03s-5.39-12.03-12.03-12.03H12.03 C5.39,0.001,0,5.39,0,12.031V372.94c0,6.641,5.39,12.03,12.03,12.03h168.424c6.641,0,12.03-5.39,12.03-12.03 C192.485,366.299,187.095,360.91,180.455,360.91z">
                                    </path>
                <path d="M381.481,184.088l-83.009-84.2c-4.704-4.752-12.319-4.74-17.011,0c-4.704,4.74-4.704,12.439,0,17.179l62.558,63.46H96.279 c-6.641,0-12.03,5.438-12.03,12.151c0,6.713,5.39,12.151,12.03,12.151h247.74l-62.558,63.46c-4.704,4.752-4.704,12.439,0,17.179 c4.704,4.752,12.319,4.752,17.011,0l82.997-84.2C386.113,196.588,386.161,188.756,381.481,184.088z">
                                    </path>
                                </g>
                <g> </g>
                <g> </g>
                <g> </g>
                <g> </g>
                <g> </g>
                <g> </g>
                            </g>
                        </g>
                    </svg>

                <span class="d-none d-md-flex">Logout</span>

            </a>

            <button onclick="myFunction()" class="btn btn-outline-info shadow-none night-mode-btn mx-2">
                <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px"
                     viewBox="0 0 24 24" width="24px">
                    <rect fill="none" height="24" width="24" />
                    <path d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z" />
                </svg>
            </button>
        </div>
    </div>

</header>

<hr class="m-0">

<ul class="nav nav-pills d-none d-md-flex ps-4 shadow" id="myTab" role="tablist">

    @{
        string menus = Accessor.HttpContext?.Session.GetString("roleMenu") ?? "";

        List<int> list = new List<int>();

        foreach (string menu in menus.Split("-",StringSplitOptions.RemoveEmptyEntries))
        {
            list.Add(Convert.ToInt32(menu));
        }
    }

    @if (list.Contains((int)AllowMenu.AdminDashboard))
    {
        <li class="nav-item" role="presentation">

            <a asp-controller="Admin" asp-action="Dashboard" class="nav-link px-0 admin-tab" id="dashboard-tab">
                <span class="tabHeader py-2 px-3">Dashboard</span>
            </a>
        </li>
    }

    @if (list.Contains((int)AllowMenu.ProviderLocation))
    {
        <li class="nav-item" role="presentation">
            <a asp-controller="Admin" asp-action="ProviderLocation" class="nav-link px-0 admin-tab" id="provider-location-tab">
                <span class="tabHeader py-2 px-3">Provider Location</span>
            </a>
        </li>
    }
    @if (list.Contains((int)AllowMenu.AdminProfile))
    {
        <li class="nav-item" role="presentation">
            <a asp-controller="Admin" asp-action="Profile" class="nav-link px-0 admin-tab" id="profile-tab">
                <span class="tabHeader py-2 px-3">My Profile</span>
            </a>
        </li>
    }
    @if (list.Contains((int)AllowMenu.ProviderMenu) || list.Contains((int)AllowMenu.Scheduling) || list.Contains((int)AllowMenu.Invoicing))
    {
        <li class="admin-tab nav-item" role="presentation" id="provider-parent">

            <a style="cursor:pointer" class="nav-link admin-tab px-0" id="provider-tab" data-bs-toggle="dropdown">
                <span class="tabHeader py-2 px-3">Providers</span>
            </a>

            <ul class="dropdown-menu" aria-labelledby="provider-tab">


                @if (list.Contains((int)AllowMenu.ProviderMenu))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="ProviderMenu">Providers</a></li>

                }
                @if (list.Contains((int)AllowMenu.Scheduling))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="Scheduling">Scheduling</a></li>

                }
                @if (list.Contains((int)AllowMenu.Invoicing))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="Invoicing">Invoicing</a></li>
                }
            </ul>

        </li>
    }

    @if (list.Contains((int)AllowMenu.Partners))
    {
        <li class="nav-item" role="presentation">
            <a asp-controller="Admin" asp-action="Vendors" class="nav-link px-0 admin-tab" id="partner-tab">
                <span class="tabHeader py-2 px-3">Partners</span>
            </a>
        </li>

    }
    @if (list.Contains((int)AllowMenu.AccountAccess) || list.Contains((int)AllowMenu.UserAccess))
    {
        <li class="admin-tab nav-item" role="presentation" id="access-parent">

            <a style="cursor:pointer" class="nav-link admin-tab px-0" id="access-tab" data-bs-toggle="dropdown">
                <span class="tabHeader py-2 px-3">Access</span>
            </a>

            <ul class="dropdown-menu" aria-labelledby="access-tab">

                @if (list.Contains((int)AllowMenu.AccountAccess))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="AccountAccess">Account Access</a></li>

                }
                @if (list.Contains((int)AllowMenu.UserAccess))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="UserAccess">User Access</a></li>

                }
            </ul>

        </li>
    }

    @if (list.Contains((int)AllowMenu.SearchRecords) || list.Contains((int)AllowMenu.EmailLogs) || list.Contains((int)AllowMenu.SMSLogs) || list.Contains((int)AllowMenu.PatientRecords) || list.Contains((int)AllowMenu.BlockedHistory))
    {
        <li class="admin-tab nav-item" role="presentation" id="record-parent">

            <a style="cursor:pointer" class="nav-link admin-tab px-0" id="record-tab" data-bs-toggle="dropdown">
                <span class="tabHeader py-2 px-3">Records</span>
            </a>

            <ul class="dropdown-menu" aria-labelledby="access-tab">

                @if (list.Contains((int)AllowMenu.SearchRecords))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="SearchRecords">Search Records</a></li>

                }
                @if (list.Contains((int)AllowMenu.EmailLogs))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="EmailLogs">Email Logs</a></li>
                }
                @if (list.Contains((int)AllowMenu.SMSLogs))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="SMSLogs">SMS Logs</a></li>
                }
                @if (list.Contains((int)AllowMenu.PatientRecords))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="PatientRecords">Patient Records</a></li>
                }
                @if (list.Contains((int)AllowMenu.BlockedHistory))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="BlockedHistory">Blocked History</a></li>
                }
            </ul>

        </li>
    }
</ul>

<div class="offcanvas offcanvas-start d-md-none" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">

    <div class="offcanvas-header py-0 mt-3">
        <h5 class="offcanvas-title" id="offcanvasExampleLabel">HalloDoc</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>

    <div class="dashboard-sidebar offcanvas-body">

        @if (list.Contains((int)AllowMenu.AdminDashboard))
        {
            <a asp-controller="Admin" asp-action="Dashboard" class="nav-link px-0 admin-tab" id="mobile-dashboard-tab">
                <span class="tabHeader py-2 px-3">Dashboard</span>
            </a>
        }

        @if (list.Contains((int)AllowMenu.ProviderLocation))
        {
            <a asp-controller="Admin" asp-action="ProviderLocation" class="nav-link mt-2 px-0 admin-tab" id="provider-location-tab">
                <span class="tabHeader py-2 px-3">Provider Location</span>
            </a>
        }

        @if (list.Contains((int)AllowMenu.AdminProfile))
        {
            <a asp-controller="Admin" asp-action="Profile" class="nav-link px-0 mt-2 admin-tab" id="profile-tab">
                <span class="tabHeader py-2 px-3">My Profile</span>
            </a>
        }

        @if (list.Contains((int)AllowMenu.ProviderMenu) || list.Contains((int)AllowMenu.Scheduling) || list.Contains((int)AllowMenu.Invoicing))
        {
            <a style="cursor:pointer" class="nav-link admin-tab px-0 mt-2" id="provider-tab" data-bs-toggle="dropdown">
                <span class="tabHeader py-2 px-3">Providers</span>
            </a>

            <ul class="dropdown-menu" aria-labelledby="provider-tab">

                @if (list.Contains((int)AllowMenu.ProviderMenu))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="ProviderMenu">Providers</a></li>
                }
                @if (list.Contains((int)AllowMenu.Scheduling))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="Scheduling">Scheduling</a></li>
                }
                @if (list.Contains((int)AllowMenu.Invoicing))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="Invoicing">Invoicing</a></li>
                }

            </ul>

        }

        @if (list.Contains((int)AllowMenu.Partners))
        {
            <a asp-controller="Admin" asp-action="Vendors" class="nav-link mt-2 px-0 admin-tab" id="partner-tab">
                <span class="tabHeader py-2 px-3">Partners</span>
            </a>
        }

        @if (list.Contains((int)AllowMenu.AccountAccess) || list.Contains((int)AllowMenu.UserAccess))
        {
            <a style="cursor:pointer" class="nav-link admin-tab mt-2 px-0" id="access-tab" data-bs-toggle="dropdown">
                <span class="tabHeader py-2 px-3">Access</span>
            </a>

            <ul class="dropdown-menu" aria-labelledby="access-tab">

                @if (list.Contains((int)AllowMenu.AccountAccess))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="AccountAccess">Account Access</a></li>

                }
                @if (list.Contains((int)AllowMenu.UserAccess))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="UserAccess">User Access</a></li>

                }
            </ul>

        }

        @if (list.Contains((int)AllowMenu.SearchRecords) || list.Contains((int)AllowMenu.EmailLogs) || list.Contains((int)AllowMenu.SMSLogs) || list.Contains((int)AllowMenu.PatientRecords) || list.Contains((int)AllowMenu.BlockedHistory))
        {
            <a style="cursor:pointer" class="nav-link admin-tab mt-2 px-0" id="record-tab" data-bs-toggle="dropdown">
                <span class="tabHeader py-2 px-3">Records</span>
            </a>

            <ul class="dropdown-menu" aria-labelledby="access-tab">

                @if (list.Contains((int)AllowMenu.SearchRecords))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="SearchRecords">Search Records</a></li>

                }
                @if (list.Contains((int)AllowMenu.EmailLogs))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="EmailLogs">Email Logs</a></li>
                }
                @if (list.Contains((int)AllowMenu.SMSLogs))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="SMSLogs">SMS Logs</a></li>
                }
                @if (list.Contains((int)AllowMenu.PatientRecords))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="PatientRecords">Patient Records</a></li>
                }
                @if (list.Contains((int)AllowMenu.BlockedHistory))
                {
                    <li><a class="dropdown-item" asp-controller="Admin" asp-action="BlockedHistory">Blocked History</a></li>
                }
            </ul>

        }
    </div>

</div>
